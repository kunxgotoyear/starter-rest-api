const myModalEl=document.getElementById("modalAlert"),modal=new mdb.Modal(myModalEl,{backdrop:"static",keyboard:!1,focus:!0});modal.show();const instance=mdb.Toast.getInstance(document.getElementById("placement-example-toast"));(this.Notif=(e=>({update:()=>{e.update({stacking:!0,hidden:!0,width:"375px",position:"top-right",autohide:!0,delay:3e3})},show:({...t})=>{console.log(document.getElementById("placement-example-toast")),t.status?e.update({color:"light"}):e.update({color:"danger"}),document.getElementById("placement-example-toast").children[1].textContent=t.content,e.show()},hide:()=>{e.hide()}})))(instance).update(),$(document).ready(async function(){$.ajax({type:"POST",url:"/auth/status?Content-Type=application/json&Charset=UTF-8",dataType:"json",success:function(e){console.log("Success!",e),modal.hide()},error:function(e,t,o){console.log(e,t,o);const n=e.responseJSON;if(!1===n.status&&n.content.toLowerCase().includes("register"))switch(location.pathname){case"/login.html":case"/register.html":modal.hide();break;default:location.href="/login.html",modal.hide()}else if(!1===n.status&&n.content.toLowerCase().includes("denied")){switch(location.pathname.replace(".html","")){case"/login":case"/register":case"/index":case"/":window.location.replace("main.html"),modal.hide();break;default:modal.hide()}}}}),$("[data-form-login]").submit(e=>{e.preventDefault(),console.log(e);const t=new FormData(e.target),o=Object.fromEntries(t);modal.show(),$.ajax({type:"POST",url:"/auth/login?Content-Type=application/json&Charset=UTF-8",data:o,dataType:"json",success:function(e){console.log("Success!",e),modal.hide(),Notif(instance).show(e),window.location.replace("main.html")},error:function(e){console.error(e.responseJSON),modal.hide(),Notif(instance).show(e.responseJSON)}})}),$("[data-button-logout]").click(e=>{e.preventDefault(),$.ajax({type:"PUT",url:"/auth/logout?Content-Type=application/json&Charset=UTF-8",dataType:"json",success:function(e){console.log("Success!",e),modal.hide(),Notif(instance).show(e),window.location.replace("login.html")},error:function(e){console.error(e.responseJSON),modal.hide(),Notif(instance).show(e.responseJSON)}})})});