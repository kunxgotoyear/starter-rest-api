const myModalEl=document.getElementById("modalAlert"),modal=new mdb.Modal(myModalEl,{backdrop:"static",keyboard:!1,focus:!0});modal.show();const instance=mdb.Toast.getInstance(document.getElementById("placement-example-toast"));(this.Notif=(o=>({update:()=>{o.update({stacking:!0,hidden:!0,width:"375px",position:"top-right",autohide:!0,delay:3e3})},show:({...e})=>{console.log(document.getElementById("placement-example-toast")),e.status?o.update({color:"light"}):o.update({color:"danger"}),document.getElementById("placement-example-toast").children[1].textContent=e.content,o.show()},hide:()=>{o.hide()}})))(instance).update(),$(document).ready(async function(){$.ajax({type:"GET",url:"http://localhost:3000/auth/status?Content-Type=application/json&Charset=UTF-8",dataType:"json",success:function(o){console.log("Success!",o),modal.hide()},error:function(o,e,t){const a=o.responseJSON;if(!1===a.status&&a.content.toLowerCase().includes("login")&&a.content.toLowerCase().includes("register"))switch(location.pathname){case"/login.html":console.log(location.pathname),console.log("stay page login"),modal.hide();break;case"/register.html":console.log(location.pathname),console.log("stay page register"),modal.hide();break;default:console.log(location.pathname),console.log("goto page login"),location.href="/login.html",modal.hide()}else switch(location.pathname){case"/login.html":case"/register.html":case"/index.html":console.log(location.pathname),console.log("go back"),window.location.replace("main.html"),modal.hide();break;default:console.log(location.pathname),console.log("stay"),modal.hide()}}}),$("[data-form-login]").submit(o=>{o.preventDefault(),console.log(o);const e=new FormData(o.target),t=Object.fromEntries(e);modal.show(),$.ajax({type:"POST",url:"http://localhost:3000/auth/login?Content-Type=application/json&Charset=UTF-8",data:t,dataType:"json",success:function(o){console.log("Success!",o),modal.hide(),Notif(instance).show(o),window.location.replace("main.html")},error:function(o){console.error(o.responseJSON),modal.hide(),Notif(instance).show(o.responseJSON)}})}),$("[data-button-logout]").click(o=>{o.preventDefault(),$.ajax({type:"PUT",url:"http://localhost:3000/auth/logout?Content-Type=application/json&Charset=UTF-8",dataType:"json",success:function(o){console.log("Success!",o),modal.hide(),Notif(instance).show(o),window.location.replace("login.html")},error:function(o){console.error(o.responseJSON),modal.hide(),Notif(instance).show(o.responseJSON)}})})});